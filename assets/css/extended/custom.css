/* ==========================================================================
   一、核心变量与 Apple 风格定义 (Variables & Reset)
   ========================================================================== */
:root {
    /* 布局 */
    --main-width: 680px;           /* 稍微加宽一点，让排版更舒展 */
    --radius: 16px;                /* Apple 风格通常是较大的圆角 */
    --gap: 12px;
    
    /* ==========================================================================
   全局配色修正：黑白文字 + 蓝色链接
   ========================================================================== */

/* 1. 白天模式 (Light Mode) */
:root {
    /* --- 核心变量保持不变 --- */
    --main-width: 680px;
    --radius: 16px;
    --gap: 12px;
    
    /* --- Apple 蓝色 (仅用于链接和按钮) --- */
    --apple-blue: #0071e3;
    --apple-blue-hover: #0077ed;
    
    /* --- 物理动效 --- */
    --apple-ease: cubic-bezier(0.25, 0.1, 0.25, 1.0);
    --transition: 0.4s var(--apple-ease);
    
    /* --- 核心背景色 --- */
    --apple-bg-light: rgba(255, 255, 255, 0.8);
    --apple-bg-dark: rgba(28, 28, 30, 0.8);

    /* --- 【修改重点】文字颜色定义 --- */
    /* 标题颜色：纯黑 */
    --primary: #000000 !important;
    
    /* 正文颜色：Mac 默认深灰，细腻护眼 */
    --content: #1d1d1f !important;
    
    /* 链接颜色变量 */
    --link-color: var(--apple-blue);
}

/* 2. 暗黑模式 (Dark Mode) */
.dark {
    /* --- 【修改重点】文字颜色反转 --- */
    /* 标题颜色：纯白 */
    --primary: #ffffff !important;
    
    /* 正文颜色：浅灰，柔和不刺眼 */
    --content: #d0d0d0 !important;
    
    /* 卡片背景：保持 iOS 深色风格 */
    --entry: #1c1c1e !important;
    
    /* 链接颜色：暗黑模式下蓝色要更亮一点，否则看不清 */
    --link-color: #2997ff !important;
    
    /* 导航栏背景适配 */
    --apple-bg-light: var(--apple-bg-dark); 
}

/* ==========================================================================
   3. 强制应用配色规则 (Apply Rules)
   ========================================================================== */

/* 强制正文使用 --content 颜色 */
body, p, ul, ol, li, div {
    color: var(--content);
}

/* 强制标题使用 --primary 颜色 */
h1, h2, h3, h4, h5, h6, strong, b, .entry-header h2 {
    color: var(--primary) !important;
}

/* 强制链接使用蓝色，并且去掉下划线 */
a {
    color: var(--link-color) !important;
    text-decoration: none;
}

/* 导航栏菜单：默认显示标题色(黑/白)，鼠标悬停变蓝 */
#menu li a {
    color: var(--primary) !important;
}
#menu li a:hover {
    color: var(--link-color) !important;
}

/* Logo 文字：始终跟随标题颜色 */
.logo a {
    color: var(--primary) !important;
}

/* 强制开启硬件加速与字体平滑 */
html {
    scroll-behavior: smooth;
    -webkit-tap-highlight-color: transparent;
}

body {
    /* macOS 优先字体栈 */
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
    -webkit-font-smoothing: antialiased; /* 让字体在 Retina 屏上极度清晰 */
    -moz-osx-font-smoothing: grayscale;
    line-height: 1.75;
    letter-spacing: 0.01em;
    transition: background-color 0.4s ease, color 0.4s ease; /* 这里的 ease 用普通的就好，避免背景闪烁 */
}

/* 自定义滚动条 (隐形/极简) */
::-webkit-scrollbar { width: 0px; background: transparent; } /* 很多 Apple 页面完全隐藏滚动条，如果你想要显示，改为 6px */

/* ==========================================================================
   二、导航栏：磨砂玻璃效果 (Glassmorphism Navigation)
   ========================================================================== */
.nav {
    max-width: var(--main-width) !important;
    padding: auto 20px !important;
    position: sticky !important;
    top: 10px !important; /* 悬浮在顶部一点点 */
    z-index: 999;
    min-height: 60px !important; /* 确保有足够的高度容纳大图标 */
    align-items: center !important; /* 再次确保 Flex 容器内的垂直对齐 */
    
    /* 核心磨砂玻璃代码 */
    background: var(--apple-bg-light) !important;
    backdrop-filter: saturate(180%) blur(20px);
    -webkit-backdrop-filter: saturate(180%) blur(20px);
    
    border-radius: 20px; /* 胶囊形状导航 */
    border: 1px solid rgba(0, 0, 0, 0.05);
    margin: 0 auto 12px auto !important; /* 下方留白 */
    box-shadow: 0 4px 20px rgba(0,0,0,0.03);
}

.dark .nav {
    background: var(--apple-bg-dark) !important;
    border: 1px solid rgba(255, 255, 255, 0.05);
}

#menu {
    display: flex !important;
    align-items: center !important;
    gap: 5px; /* 图标之间的基础间距 */
}

#menu li a {
    font-size: 24px !important;
    line-height: 1 !important;  /* 防止图标变大后撑破导航栏高度 */
    font-weight: 500;
    padding: 0 8px !important;  /* 稍微增加一点左右间距，防止图标挨得太近 */
    display: inline-flex !important; 
    align-items: center;        /* 确保图标在自己的格子里居中 */
    color: var(--content) !important;
}
#menu li a:hover { color: var(--primary) !important; }

/* 隐藏 Logo 文字，如果只想显示图标，或者调整 Logo 大小 */
.logo a { font-weight: 700; font-size: 24px; }
/* --- 修复导航栏 Logo 对齐问题 --- */
.logo {
    display: flex !important;
    align-items: center !important; /* 垂直居中核心代码 */
    height: 100% !important;
    gap: 0px !important; 
}

.logo a {
    display: flex !important;
    align-items: center !important; /* 让图片和“图图”文字在同一水平线 */
    gap: 12px; /* 图片和文字之间的间距 */
    text-decoration: none !important;
    background: transparent !important; /* 防止有奇怪的背景色 */
}

.logo img {
    display: block !important;
    height: 32px !important;       /* 核心！强制高度 */
    width: auto !important;        /* 宽度按比例缩放 */
    position: relative !important;
    top: 0 !important; /* 防止之前的样式有偏移 */
    margin: 0 !important; /* 去除默认边距 */
    transform: translateY(2px) !important; /* 归位 */
    object-fit: contain;           /* 保持图片比例不拉伸 */
}

/* 针对暗黑模式切换按钮也要垂直居中 */
.logo-switches {
    display: flex !important;
    align-items: center !important;
}
/* ==========================================================================
   三、首页与文章列表 (Home & Post List)
   ========================================================================== */
.first-entry {
    margin-top: 12px !important;    /* 离导航栏的距离 */
    margin-bottom: 12px !important; /* 离文章列表的距离 */
    padding: 20px 0 !important;     /* 内部留白保持适度，不然文字会太挤 */
    min-height: auto !important;    /* 取消默认的高度限制 */
    text-align: center;
}

.first-entry h1 {
    font-size: 48px !important; /* 大标语 */
    font-weight: 700;
    letter-spacing: -1px;
    background: linear-gradient(120deg, #000, #555);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 10px;
}

.dark .first-entry h1 {
    background: linear-gradient(120deg, #fff, #aaa);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.main {
    margin-top: 0 !important; 
    padding-top: 0 !important;
}

/* 文章卡片 */
.post-entry {
    background: var(--entry);
    padding: 24px !important;
    border-radius: 20px !important; /* 更大的圆角 */
    border: 1px solid transparent;
    transition: transform var(--transition), box-shadow var(--transition), background var(--transition);
    margin-bottom: 16px !important;
}

.post-entry:hover {
    transform: scale(1.02); /* 细微放大 */
    box-shadow: 0 10px 40px -10px rgba(0, 0, 0, 0.1);
    background: var(--entry); /* 保持背景，利用阴影突出 */
    border-color: rgba(128, 128, 128, 0.1);
}

.entry-header h2 {
    font-size: 20px !important;
    font-weight: 600;
    margin-bottom: 8px;
}

.entry-content {
    color: var(--apple-gray);
    font-size: 15px;
}

/* ==========================================================================
   四、正文阅读体验 (Typography & Content)
   ========================================================================== */
.post-content {
    font-size: 17px; /* 提升阅读舒适度 */
    line-height: 1.8;
}

.post-content h1, .post-content h2, .post-content h3 {
    font-weight: 600;
    letter-spacing: -0.02em;
    margin-top: 1.5em;
}

/* 链接样式：渐变下划线 */
.post-content a {
    color: var(--primary);
    text-decoration: none;
    border-bottom: 1px solid rgba(0, 113, 227, 0.3);
    transition: border-bottom 0.2s;
}
.post-content a:hover {
    border-bottom: 2px solid var(--primary);
}

/* 代码块 Mac 窗口风格 */
.post-content pre {
    border-radius: 12px;
    background: #1d1d1f !important; /* 纯黑背景 */
    border: 1px solid rgba(255,255,255,0.1);
    box-shadow: 0 20px 40px rgba(0,0,0,0.2);
}

/* 图片缩放与圆角 */
.post-content img {
    border-radius: 12px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.05);
}

/* ==========================================================================
   五、交互元素：按钮与分页 (Buttons & Interactions)
   ========================================================================== */
/* Apple 风格蓝色按钮 */
.button, .buttons a, .pagination a {
    border-radius: 999px !important; /* 彻底的胶囊圆角 */
    background: rgba(0, 113, 227, 0.1); /* 浅蓝色背景 */
    color: var(--primary) !important;
    font-weight: 500;
    padding: 8px 20px !important;
    border: none !important;
    transition: all 0.2s cubic-bezier(0.5, 1, 0.89, 1);
}

.button:hover, .buttons a:hover, .pagination a:hover {
    background: var(--primary) !important;
    color: #fff !important;
    transform: scale(1.05);
    box-shadow: 0 5px 15px rgba(0, 113, 227, 0.3);
}

/* 分页按钮特殊处理 */
.pagination .next, .pagination .prev {
    background: var(--entry) !important; /* 普通背景 */
    color: var(--primary) !important;
}
.pagination .next:hover, .pagination .prev:hover {
    background: var(--primary) !important;
    color: white !important;
}

/* 暗黑模式切换按钮动画 */
#theme-toggle {
    border-radius: 50%;
    padding: 10px;
}
#theme-toggle:hover {
    background: rgba(128,128,128,0.1);
}
#theme-toggle svg {
    transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
    width: 24px !important;     /* 强制设置 SVG 宽度 */
    height: 24px !important;    /* 强制设置 SVG 高度 */
    vertical-align: middle;
}
#theme-toggle:active svg {
    transform: rotate(90deg) scale(0.8);
}

/* ==========================================================================
   六、胶囊组件规范 (Taxonomy Capsules)
   ========================================================================== */
.terms-tags, .side-categories-horizontal {
    justify-content: center; /* 居中显示 */
    gap: 8px !important;
}

.terms-tags li a, .side-categories-horizontal li a {
    background: rgba(128, 128, 128, 0.08);
    padding: 6px 14px !important;
    border-radius: 8px !important;
    color: var(--content) !important;
    font-size: 14px !important;
    transition: all 0.2s ease;
    border: none !important;
}

.terms-tags li a:hover, .side-categories-horizontal li a:hover {
    background: var(--primary) !important;
    color: white !important;
    transform: translateY(-1px);
}
.terms-tags li a sup { display: none; } /* 隐藏上标数字，更简洁 */

/* ==========================================================================
   七、特定页面美化 (Archives, About, 404, Search)
   ========================================================================== */

/* ==========================================================================
   归档页终极形态 v4：视口固定悬浮 (Viewport Fixed Position)
   ========================================================================== */

/* -----------------------------------------------------------
   状态 A: 屏幕宽于 1280px (大屏模式 - 钉在屏幕右侧不动)
   ----------------------------------------------------------- */
@media (min-width: 1280px) {
    /* 1. 主容器：保持普通块级显示 */
    .custom-archive-wrapper {
        display: block !important;
        position: relative !important;
    }

    /* 2. 左侧文章列表：独占 100% 宽度 */
    .archives-left-side {
        width: 100% !important;
        max-width: 100% !important;
    }

    /* 3. 右侧侧边栏：【核心修改】使用 fixed 定位 */
    .archives-right-sidebar {
        display: block !important;
        position: fixed !important; /* 核心：钉在屏幕上，不随滚动条移动 */
        
        /* 垂直定位：距离浏览器顶部 100px */
        top: 180px !important;      
        
        /* 水平定位核心算法：屏幕正中间 + (内容宽度900px的一半) + 10px间隙 */
        left: 50% !important;
        margin-left: 460px !important; 
        
        /* 尺寸与外观 */
        width: 100px !important;
        background: transparent !important; /* 无背景 */
        border: none !important;
        box-shadow: none !important;
        padding: 0 !important;
        z-index: 100; /* 确保不被遮挡 */
        
        /* 防止侧边栏太长超出屏幕，允许内部滚动 */
        max-height: 80vh !important;
        overflow-y: auto !important;
        /* 隐藏侧边栏的滚动条 */
        scrollbar-width: none; 
        -ms-overflow-style: none;
    }
    
    /* 隐藏 Chrome/Safari 的滚动条 */
    .archives-right-sidebar::-webkit-scrollbar {
        display: none;
    }

    /* 4. 列表容器：垂直居中排列 */
    .archives-right-sidebar ul {
        list-style: none !important;    /* 去圆点 */
        padding: 0 !important;
        margin: 0 !important;
        display: flex !important;
        flex-direction: column !important;
        align-items: center !important; /* 居中对齐 */
        gap: 10px !important;           /* 胶囊间距 */
    }

    /* 5. 列表项修正 */
    .archives-right-sidebar li {
        list-style: none !important;
        margin: 0 !important;
        padding: 0 !important;
        width: 100% !important;
        display: flex !important;
        justify-content: center !important;
    }
    
    /* 6. 胶囊样式 */
    .archives-right-sidebar li a {
        background: var(--entry) !important;
        border: 1px solid rgba(128, 128, 128, 0.1);
        box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        width: auto !important;
        min-width: 80px !important;
        justify-content: center !important;
    }
}

/* -----------------------------------------------------------
   状态 B: 屏幕小于 1280px (窄屏模式 - 顶部横向排列)
   ----------------------------------------------------------- */
@media (max-width: 1279px) {
    .custom-archive-wrapper {
        display: flex !important;
        flex-direction: column-reverse !important;
        gap: 20px !important;
    }

    .archives-right-sidebar {
        width: 100% !important;
        position: static !important; /* 恢复正常流 */
        background: var(--entry) !important; /* 窄屏下加回背景 */
        padding: 15px !important;
        border-radius: 16px;
        margin-left: 0 !important; /* 清除偏移 */
    }

    .archives-right-sidebar ul {
        list-style: none !important;
        display: flex !important;
        flex-direction: row !important;
        flex-wrap: wrap !important;
        justify-content: center !important;
        gap: 10px !important;
        padding: 0 !important;
    }
    
    .archives-right-sidebar li {
        list-style: none !important;
        width: auto !important;
    }
    
    .sidebar-header-style { display: none !important; }
}

/* 2. 关于页面 (About) - 时间轴美化 */
.timeline { border-left: 2px solid rgba(0, 113, 227, 0.2); }
.timeline-item::before {
    background: #fff;
    border: 3px solid var(--primary);
    box-shadow: 0 0 0 4px var(--theme); /* 这种写法可以让圆点和线之间有空隙 */
}

/* 3. 搜索框 (Spotlight 风格) */
#search-input {
    border-radius: 12px;
    background: rgba(128,128,128,0.1);
    border: none;
    padding: 16px;
    font-size: 18px;
    backdrop-filter: blur(10px);
}
#search-input:focus {
    background: var(--entry);
    box-shadow: 0 0 0 2px var(--primary);
}

/* 4. 404 页面 */
.error-code {
    background: linear-gradient(135deg, #0071e3, #a259ff);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    filter: drop-shadow(0 10px 20px rgba(0, 113, 227, 0.2));
}

/* ==========================================================================
   八、响应式修正 (Mobile)
   ========================================================================== */
@media screen and (max-width: 768px) {
    :root { --main-width: 100%; }
    .nav { 
        width: 90%; 
        top: 10px;
        backdrop-filter: saturate(180%) blur(30px); /* 移动端加大模糊 */
    }
    .first-entry h1 { font-size: 32px !important; }
    .custom-archive-wrapper { flex-direction: column-reverse; }
}


/* ==========================================================================
   隐藏页面冗余标题 (Hide Page Headers)
   包括：归档页、搜索页、标签页、分类页
   ========================================================================== */

/* 1. 隐藏功能页的大标题容器 */
.page-header {
    display: none !important; /* 彻底隐藏 "Archives", "Search", "Tags" 这些大字 */
    margin: 0 !important;     /* 去除占据的边距 */
    padding: 0 !important;
}

/* 2. 针对搜索页的特殊处理 */
/* 搜索页的搜索框有时会依赖 header 的间距，这里手动修补一下 */
#searchbox {
    margin-top: 30px !important; /* 给搜索框顶部加点呼吸空间 */
}


/* 1. 隐藏浏览器默认的黑色倒三角 */
.toc details summary::-webkit-details-marker {
    display: none;
}
.toc details summary {
    list-style: none;
}




