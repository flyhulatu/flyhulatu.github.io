{{- $links := site.Data.links -}}

<div class="friend-links-container">
  {{- range $links }}
  <!-- 1. 渲染分组标题 -->
  <h2 class="friend-group-title">
    {{ .group }}
    {{ if .description }}<span class="friend-group-desc">{{ .description }}</span>{{ end }}
  </h2>

  <!-- 2. 渲染该分组下的卡片列表 -->
  <div class="friend-links-grid">
    {{- range .items }}
    <a class="friend-card" href="{{ .url }}" target="_blank" rel="noopener noreferrer">
      <div class="friend-left">
        <img class="friend-avatar" src="{{ .avatar }}" alt="{{ .name }}" loading="lazy">
      </div>
      <div class="friend-right">
        <div class="friend-name">{{ .name }}</div>
        <div class="friend-desc" title="{{ .desc }}">{{ .desc }}</div>
      </div>
    </a>
    {{- end }}
  </div>
  {{- end }}
</div>

<style>
/* 容器样式 */
.friend-group-title {
    margin-top: 40px;
    margin-bottom: 20px;
    font-size: 1.5rem;
    border-bottom: 1px solid #eee;
    padding-bottom: 10px;
}
.friend-group-desc {
    font-size: 0.9rem;
    color: #888;
    margin-left: 10px;
    font-weight: normal;
}

/* 网格布局：自动适应宽度，类似你的截图 */
.friend-links-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); /* 最小宽280px，不够换行 */
    gap: 20px;
}

/* 卡片样式 */
.friend-card {
    display: flex;
    align-items: center;
    background: var(--entry); /* PaperMod的主题背景色变量 */
    border: 1px solid var(--border); /* PaperMod的边框变量 */
    border-radius: 8px;
    padding: 15px;
    text-decoration: none !important;
    transition: transform 0.2s, box-shadow 0.2s;
}

.friend-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    border-color: var(--primary); /* 悬停变色 */
}

/* 左侧头像 */
.friend-left {
    margin-right: 15px;
    flex-shrink: 0;
}
/* 修改前的样式 */
/* .friend-avatar {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    object-fit: cover;
    background-color: #f5f5f5;
} */

/* 修改后的样式 (推荐) */
.friend-avatar {
    width: 50px;           /* 固定宽度 */
    height: 50px;          /* 固定高度 */
    border-radius: 8px;    /* 圆角 */
    
    /* --- 核心修改开始 --- */
    object-fit: contain;   /* 关键！让图片完整显示，不裁切，自动缩放 */
    padding: 6px;          /* 内边距：给 Logo 留出呼吸空间，不让它顶到边框 */
    box-sizing: border-box;/* 确保 padding 不会撑大图片容器 */
    /* --- 核心修改结束 --- */

    background-color: #fff; /* 强制白色背景，防止透明 Logo 看起来奇怪 */
    border: 1px solid #f0f0f0; /* 加一个细边框，更有质感 */
    margin-right: 15px;    /* 保持和右边文字的距离 */
    flex-shrink: 0;        /* 防止被挤压变形 */
}

/* 右侧文字 */
.friend-right {
    flex-grow: 1;
    overflow: hidden; /* 防止文字溢出 */
}
.friend-name {
    font-size: 1.1rem;
    font-weight: bold;
    color: var(--primary);
    margin-bottom: 4px;
}
.friend-desc {
    font-size: 0.85rem;
    color: #666;
    white-space: nowrap;      /* 强制一行显示 */
    overflow: hidden;         /* 超出隐藏 */
    text-overflow: ellipsis;  /* 超出显示省略号 */
}

</style>